@using NuGet.Versioning
@model IEnumerable<CrudDemo.Models.Course>

<div class="menu-dashboard">
    <h1>Mes Cours</h1>
  
  

    @if (!Model.Any())
    {
        <div class="alert alert-info">
            <p>Aucun cours disponible pour le moment.</p>
        </div>
    }
    else
    {


        <div class="row">
            @{ var module = 0; }
            @foreach (var course in Model)
            {
                ++module;
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <div class="card-footer bg-white border-top">

                            @{
                                var module1 = module;
                            }
                            <a 
                                asp-controller="Courses"
                                asp-action="Details"
                                asp-route-id="@course.Id">
                                <i class="fas fa-eye"></i> Modules @module1 @course.Title 
                                
                            </a>
                            
                            @foreach (var m in course.Modules)
                            {

                                
                                @if (m.Lessons != null && m.Lessons.Any())
                                {
                                    <h4><i class="fas fa-video"></i> Sous module @m.Title</h4>
                                    <ul class="list-unstyled ms-3 mt-2">
                                        @foreach (var lesson in m.Lessons.OrderBy(l => l.OrderIndex))
                                    {
                                        <li class="mb-2">
                                            <a asp-action="Lesson" asp-route-id="@lesson.Id">
                                                <i class="fas fa-play-circle"></i> @lesson.Title
                                            </a>
                                        </li>
                                     
                                        }
                                    </ul>
                                }
                            }


                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>
